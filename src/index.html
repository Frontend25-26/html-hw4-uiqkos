<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HW4 - Три кота</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Viaoda+Libre&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./styles.css">
    <link rel="stylesheet" href="./tailwind.css">
    <link rel="stylesheet" href="./styles.scss">
</head>

<body>
    <div class="cards-container">
        <div class="card-css3">
            <div class="card-inner">
                <div class="card-face card-back"></div>
                <div class="card-face card-front">
                    <div class="card-title"></div>
                    <img src="" alt="Tarot card" class="card-image" width="270" height="500">
                    <div class="card-overlay">
                        <div class="card-actions">
                            <button class="btn btn-like">
                                <img src="./icons/1F5A4.svg" alt="Like" class="icon-img" width="35" height="35">
                            </button>
                            <button class="btn btn-icon">
                                <img src="" alt="Card icon" class="icon-img" width="35" height="35">
                            </button>
                        </div>
                    </div>
                    <div class="card-description"></div>
                </div>
            </div>
        </div>

        <div class="card-tailwind w-[270px] h-[500px] cursor-pointer [perspective:1000px]">
            <div
                class="card-inner-tw relative w-full h-full transition-transform duration-[0.8s] [transform-style:preserve-3d]">
                <div
                    class="card-face-tw absolute w-full h-full rounded-[15px]
                           shadow-[0_10px_30px_rgba(0,0,0,0.5)] [backface-visibility:hidden]
                           bg-gradient-to-br from-[#2d3561] to-[#1a1f3a]
                           border-[3px] border-[#d4af37] flex items-center justify-center">
                    <span class="text-6xl">✨</span>
                </div>
                <div
                    class="card-face-tw card-front-tw absolute w-full h-full rounded-[15px] shadow-[0_10px_30px_rgba(0,0,0,0.5)] [backface-visibility:hidden] bg-[#1a1a2e] relative [transform:rotateY(180deg)]">
                    <div
                        class="card-title-tw absolute top-0 left-0 right-0 bg-transparent text-white text-[24px] font-['Viaoda_Libre',cursive] leading-[1.4] text-center transition-transform duration-300 rounded-t-[15px] [text-shadow:2px_2px_4px_rgba(0,0,0,0.8)] z-[1]">
                    </div>
                    <img src="" alt="Tarot card" class="card-image w-full h-full object-cover rounded-[15px]"
                        width="270" height="500">
                    <div
                        class="card-overlay-tw absolute top-0 left-0 w-full h-full bg-[rgba(0,0,0,0.7)] opacity-0 transition-opacity duration-300 rounded-[15px] pointer-events-none flex flex-col items-center justify-center gap-4">
                        <div class="flex gap-4">
                            <button
                                class="card-btn-like w-[55px] h-[55px] border-2 border-white/30 rounded-full hover:scale-110 hover:border-white/50 transition-all duration-300 flex items-center justify-center pointer-events-auto cursor-pointer">
                                <img src="./icons/1F5A4.svg" alt="Like" class="w-[35px] h-[35px] brightness-0 invert" width="35" height="35">
                            </button>
                            <button
                                class="card-btn-icon w-[55px] h-[55px] border-2 border-white/30 rounded-full hover:scale-110 hover:border-white/50 transition-all duration-300 flex items-center justify-center pointer-events-auto cursor-pointer">
                                <img src="" alt="Card icon" class="w-[35px] h-[35px] brightness-0 invert" width="35" height="35">
                            </button>
                        </div>
                    </div>
                    <div
                        class="card-description-tw absolute bottom-0 left-0 right-0 bg-transparent text-white text-[20px] font-['Viaoda_Libre',cursive] leading-[1.4] transition-transform duration-300 rounded-b-[15px] [text-shadow:2px_2px_4px_rgba(0,0,0,0.8)]">
                    </div>
                </div>
            </div>
        </div>

        <div class="card-scss">
            <div class="card-inner">
                <div class="card-face card-back"></div>
                <div class="card-face card-front">
                    <div class="card-title"></div>
                    <img src="" alt="Tarot card" class="card-image" width="270" height="500">
                    <div class="card-overlay">
                        <div class="card-actions">
                            <button class="btn btn-like">
                                <img src="./icons/1F5A4.svg" alt="Like" class="icon-img" width="35" height="35">
                            </button>
                            <button class="btn btn-icon">
                                <img src="" alt="Card icon" class="icon-img" width="35" height="35">
                            </button>
                        </div>
                    </div>
                    <div class="card-description"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            const response = await fetch('./cards/tarot-cards.json');
            const tarotData = await response.json();

            function getRandomCards(count) {
                const shuffled = [...tarotData].sort(() => Math.random() - 0.5);
                return shuffled.slice(0, count);
            }

            const randomCards = getRandomCards(3);

            function initializeCard(cardData, selector, selectors) {
                const cardImage = document.querySelector(`${selector} .card-image`);
                const cardTitle = document.querySelector(`${selector} ${selectors.title}`);
                const cardDescription = document.querySelector(`${selector} ${selectors.description}`);
                const iconBtn = document.querySelector(`${selector} ${selectors.iconBtn}`);
                const iconImg = iconBtn.querySelector(selectors.iconImg);
                const likeBtn = document.querySelector(`${selector} ${selectors.likeBtn}`);

                cardImage.src = `./cards/${cardData.filename}`;
                cardTitle.textContent = cardData.name;
                cardDescription.textContent = cardData.interpretation;
                iconImg.src = `./icons/${cardData.iconHexcode}.svg`;
                iconImg.alt = cardData.name;

                if (cardData.hexColors && cardData.hexColors.length >= 2) {
                    const gradient = `linear-gradient(135deg, ${cardData.hexColors[0]}, ${cardData.hexColors[1]})`;
                    iconBtn.style.setProperty('--gradient-bg', gradient);
                    iconBtn.classList.add('card-gradient-bg');
                    likeBtn.style.setProperty('--gradient-bg', gradient);
                    likeBtn.classList.add('card-gradient-bg');
                }
            }

            initializeCard(randomCards[0], '.card-css3', {
                title: '.card-title',
                description: '.card-description',
                iconBtn: '.btn-icon',
                iconImg: '.icon-img',
                likeBtn: '.btn-like'
            });

            initializeCard(randomCards[1], '.card-tailwind', {
                title: '.card-title-tw',
                description: '.card-description-tw',
                iconBtn: '.card-btn-icon',
                iconImg: 'img',
                likeBtn: '.card-btn-like'
            });

            initializeCard(randomCards[2], '.card-scss', {
                title: '.card-title',
                description: '.card-description',
                iconBtn: '.btn-icon',
                iconImg: '.icon-img',
                likeBtn: '.btn-like'
            });

            const cards = document.querySelectorAll('.card-css3, .card-tailwind, .card-scss');

            cards.forEach(card => {
                card.addEventListener('mouseenter', () => {
                    card.classList.add('flipped');
                }, { once: true });
            });
        });
    </script>
</body>

</html>